<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:body>
        <ui:composition template="/WEB-INF/facelets/template.xhtml">
            <ui:define name="content">
                <p:layout style="min-height:200px; height: 32.7em;" stateful="enabled" >

                    <p:layoutUnit position="center" resizable="true">
                        <h:form> 
                            <p:dataScroller value="#{beanResolucion.listaResoluciones}" var="resolucion" chunkSize="5" mode="inline" scrollHeight="383" >
                                <f:facet name="header">
                                    Expedientes Registrados
                                </f:facet>

                                <h:panelGrid columns="1" style="width:100%" >
                                    <p:outputPanel>
                                        <h:panelGrid columns="6" cellpadding="5">
                                            <f:facet name="header" >
                                                Expediente 
                                                <h:outputText value="Id: #{resolucion.expediente.idExpediente} - Num: #{resolucion.expediente.numeroExpediente} - UDO: #{resolucion.expediente.unidadDeOrganizacion.nombreUnidad}" style="font-weight: bold"/>
                                            </f:facet>
                                            <h:outputText value="Id Resolucion:" />
                                            <h:outputText value="#{resolucion.idResolucion}" style="font-weight: bold"/>

                                            <h:outputText value="Numero de Resolucion:" />
                                            <h:outputText value="#{resolucion.numeroResolucion}" style="font-weight: bold"/>

                                            <h:outputText value="Agrupamiento:" />
                                            <h:outputText value="#{resolucion.agrupamiento}" style="font-weight: bold"/>

                                        </h:panelGrid>
                                        <p:separator />
                                    </p:outputPanel>
                                </h:panelGrid>
                            </p:dataScroller>
                        </h:form>
                    </p:layoutUnit>
                    <p:layoutUnit position="east" resizable="true"  size="700" minSize="600"  header="Formulario de Registro de Concursos" maxSize="800" collapsible="true" >

                        <p:tabView activeIndex="#{beanConcurso.numeroDePestania}" effect="fade" effectDuration="fast" id="tabuladorPestañero" >
                            <p:effect type="bounce" event="onchange" />
                            <p:ajax event="tabChange"  listener="#{beanConcurso.validarPestania}" update="tabuladorPestañero:formExpedientes:msg"/>

                            <!--   
                            **********************************
                            PESTAÑA EXPEDIENTES
                            **********************************
                            -->
                            <p:tab title="Expediente" id="tabExpediente" >
                                <h:form id="formExpedientes">
                                    <p:growl id="msg" showDetail="true" escape="false" sticky="false" life="5000"  />
                                    <h:panelGrid columns="3" cellpadding="3" frame="box" styleClass="panelAlta" >
                                        <f:facet name="header" class="encabezadoPanel">
                                            <h:outputText value="Datos Generales del Expediente" />
                                        </f:facet>

                                        <p:selectOneMenu id="cmbUnidadExpediente" value="#{beanExpediente.expedienteNuevo.unidadDeOrganizacion.codigoUnidadDeOrganizacion}" required="true" requiredMessage="Seleccione un Àrea" filter="true" validatorMessage="Seleccione un área válida" >
                                            <f:selectItem noSelectionOption="true" itemLabel=" Seleccione un Área" itemValue="null" />
                                            <f:selectItems var="unidad" value="#{beanExpediente.listaUnidadDeOrganizacions}" itemLabel="#{unidad.nombreUnidad} (#{unidad.codigoUnidadDeOrganizacion})" itemValue="#{unidad.codigoUnidadDeOrganizacion}" />
                                        </p:selectOneMenu>

                                        <p:spinner id="spnNumeroExpediente" value="#{beanExpediente.expedienteNuevo.numero}" placeholder="Número" min="0" max="9999" required="true" requiredMessage="Ingrese el Número que figura en el expediente" validatorMessage="Ingrese un numero de expediente válido"  />

                                        <p:spinner id="spnAnio" value="#{beanExpediente.expedienteNuevo.anio}" placeholder="Año" min="1950" max="2015" required="true" requiredMessage="Ingrese el año que figura en el expediente" validatorMessage="Ingrese un año válido" size="5" />

                                        <p:column>
                                            <h:outputText value="Régimen que aplica" />
                                            <p:selectOneMenu id="cmbRegimenExpediente" value="#{beanExpediente.expedienteNuevo.regimen}" style="width:100%;">
                                                <f:selectItem itemLabel="Profesional" itemValue="PROFESIONAL"/>
                                                <f:selectItem itemLabel="Técnico" itemValue="TECNICO"/>
                                                <f:selectItem itemLabel="General" itemValue="GENERAL"/>
                                            </p:selectOneMenu>
                                        </p:column>

                                        <p:column>
                                            <h:outputText value="Situación" />
                                            <p:selectOneMenu id="cmbSituacionExpediente" value="#{beanExpediente.expedienteNuevo.situacion}" style="width:100%;">
                                                <f:selectItem itemLabel="En ejecucion" itemValue="EN EJECUCION"/>
                                                <f:selectItem itemLabel="Cancelado" itemValue="CANCELADO"/>
                                                <f:selectItem itemLabel="Finalizado" itemValue="FINALIZADO"/>
                                            </p:selectOneMenu>
                                        </p:column>


                                    </h:panelGrid>
                                    <p:commandButton id="btnGuardarNuevoExpediente" value="Guardar" actionListener="#{beanExpediente.guardarExpediente}" icon="ui-icon-disk" update="tabuladorPestañero,tabuladorPestañero:formExpedientes:msg,tabuladorPestañero:formResoluciones:tblResoluciones,lblEncabezadoNuevaResolucion" styleClass="btnVerde" />
                                </h:form>
                            </p:tab>


                            <!--   
                            **********************************
                            PESTAÑA RESOLUCIONES  
                            **********************************
                            -->
                            <p:tab title="Resoluciones"  id="tabResoluciones" disabled="#{!beanExpediente.datosValidos}" >
                                <h:form id="formResoluciones">
                                    <p:commandButton value="Nuevo" onclick="PF('dlgNuevaResolucion').show();" icon="ui-icon-plusthick" />
                                    <p:dataTable  id="tblResoluciones" var="resolucion" value="#{beanResolucion.listaResoluciones}" rows="1"
                                                  paginator="true"
                                                  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                  rowsPerPageTemplate="1,3,5,10,15"
                                                  reflow="true" 
                                                  emptyMessage="Sin cargos Registrados"
                                                  draggableColumns="true"

                                                  style="text-align: center; margin-top: 5px;">
                                        <f:facet name="header">
                                            <h:outputText id="lblNumeroDeExpedienteEnResolucion" value="Resoluciones en el expediente #{beanExpediente.expedienteNuevo.numeroExpediente}" />
                                            <p:commandButton id="togglerResoluciones" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                            <p:columnToggler datasource="tblResoluciones" trigger="togglerResoluciones" />
                                        </f:facet>
                                        <p:column headerText="Id">
                                            <h:outputText value="#{resolucion.idResolucion}" />
                                        </p:column>
                                        <p:column headerText="Número">
                                            <h:outputText value="#{resolucion.numeroResolucion}" />
                                        </p:column>
                                        <p:column headerText="Agrupamiento">
                                            <h:outputText value="#{resolucion.agrupamiento}" />
                                        </p:column>
                                        <p:column headerText="Expediente">
                                            <h:outputText value="#{resolucion.expediente.numeroExpediente}" />
                                        </p:column>
                                        <p:column headerText="Oposición">
                                            <h:outputText value="#{resolucion.oposicion}" />
                                        </p:column>
                                        <p:column headerText="Modificatoria">
                                            <h:outputText value="#{resolucion.modificacion}" />
                                        </p:column>
                                        <p:column headerText="Clase">
                                            <h:outputText value="#{resolucion.clase}" />
                                        </p:column>
                                        <p:column headerText="Apertura">
                                            <h:outputText value="#{resolucion.fechaApertura}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Cierre">
                                            <h:outputText value="#{resolucion.fechaCierre}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Ejecución">
                                            <h:outputText value="#{resolucion.fechaEjecucion}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Publicación">
                                            <h:outputText value="#{resolucion.fechaPublicacion}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Estado">
                                            <h:outputText value="#{resolucion.estado}" />
                                        </p:column>

                                    </p:dataTable>

                                    <p:commandButton id="btnGuardarListaResoluciones" value="Guardar" actionListener="#{beanResolucion.guardarListaResoluciones()}" icon="ui-icon-disk" update="tabuladorPestañero,tabuladorPestañero:formExpedientes:msg" styleClass="btnVerde" />

                                </h:form>
                            </p:tab>

                            <!--   
                         **********************************
                         PESTAÑA CARGO
                         **********************************
                            -->

                            <p:tab title="Cargos" id="tabCargos" disabled="#{!beanResolucion.datosValidos}" >

                                <h:form id="formCargos">

                                    <h:panelGrid columns="2" >
                                        <p:commandButton value="NuevoCargo" icon="ui-icon-plusthick" oncomplete="PF('dlgCargoNuevo').show();" update=":formCargoNuevo" />
                                        <p:commandButton value="Actualizar" icon="ui-icon-refresh" />
                                    </h:panelGrid>


                                    <p:dataTable id="tblCargos" var="cargos" value="#{beanCargo.listaCargos}" rows="3"
                                                 paginator="true"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="3,5,10,15" reflow="true" >

                                        <f:facet name="header">
                                            <h:outputText id="lblNumeroResolucionCargo" value="Resolución: #{beanCargo.cargoNuevo.resolucion.numeroResolucion} " />
                                        </f:facet>
                                        <p:column headerText="Id">
                                            <h:outputText value="#{cargos.idCargo}" />
                                        </p:column>
                                        <p:column headerText="Profesion">
                                            <h:outputText value="#{cargos.profesion.nombreProfesion}" />
                                        </p:column>
                                        <p:column headerText="Especialidad">
                                            <h:outputText value="#{cargos.especialidad}" />
                                        </p:column>
                                        <p:column headerText="Categoria">
                                            <h:outputText value="#{cargos.categoria}" />
                                        </p:column>
                                        <p:column headerText="Función">
                                            <h:outputText value="#{cargos.funcion}" />
                                        </p:column>
                                        <p:column headerText="Establecimiento">
                                            <h:outputText value="#{cargos.establecimiento.nombre}" />
                                        </p:column>
                                        <p:column headerText="Resolución">
                                            <h:outputText value="#{cargos.resolucion.numeroResolucion}" />
                                        </p:column>
                                        <p:column headerText="Cantidad">
                                            <h:outputText value="#{cargos.cantidad}" />
                                        </p:column>

                                    </p:dataTable>
                                    <p:commandButton id="btnGuardarCargos" value="Guardar" actionListener="#{beanCargo.guardarCargos}" icon="ui-icon-disk" update="tabuladorPestañero,tabuladorPestañero:formExpedientes:msg" styleClass="btnVerde" disabled="#{!beanCargo.datosValidos}" />
                                </h:form>


                            </p:tab>

                            <!--   
                              **********************************
                              PESTAÑA TRIBUNAL 
                              **********************************
                            -->
                            <p:tab title="Tribunal" id="tabTribunal" disabled="false" >

                                <h:form id="formTribunal">

                                    <h:panelGrid columns="2" >
                                        <p:commandButton value="Nuevo tribunal" icon="ui-icon-plusthick"  oncomplete="PF('dlgNuevoJurado').show();" update="dialogoNuevoJurado"/>
                                        <p:commandButton value="Actualizar" icon="ui-icon-refresh" />
                                    </h:panelGrid>


                                    <p:dataTable id="tblTribunal" var="tribunal" value="#{beanTribunal.listaJurados}" rows="3"
                                                 paginator="true"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="3,5,10,15" reflow="true" emptyMessage="Sin jurados registrados" >

                                        <f:facet name="header">
                                            <h:outputText id="lvlTribunales" value="JURADOS " />
                                        </f:facet>
                                        <p:column headerText="Id">
                                            <h:outputText value="#{tribunal.idTribunalJurado}" />
                                        </p:column>
                                        <p:column headerText="Nombres">
                                            <h:outputText value="#{tribunal.persona.nombres}" />
                                        </p:column>
                                        <p:column headerText="Apellido">
                                            <h:outputText value="#{tribunal.persona.apellido}" />
                                        </p:column>
                                        <p:column headerText="Estado">
                                            <h:outputText value="#{tribunal.estado}" />
                                        </p:column>
                                        <p:column headerText="Presencia">
                                            <h:outputText value="#{tribunal.presencia}" />
                                        </p:column>
                                        <p:column headerText="Condicion">
                                            <h:outputText value="#{tribunal.condicion}" />
                                        </p:column>
                                        <p:column headerText="Nombre de insitución">
                                            <h:outputText value="#{tribunal.institucion.nombreInstitucion}" />
                                        </p:column>
                                        <p:column headerText="Nombre establecimiento">
                                            <h:outputText value="#{tribunal.establecimiento.nombre}" />
                                        </p:column>
                                    </p:dataTable>
                                </h:form>

                            </p:tab>


                            <!--   
                            **********************************
                            PESTAÑA POSTULANTES 
                            **********************************
                            -->
                            <p:tab title="Postulantes" id="tabPostulantes" disabled="false" >
                                <h:form id="formPestañaPostulantes">
                                    <p:commandButton value="Nuevo" oncomplete="PF('dlgPostulanteNuevo').show();" icon="ui-icon-plusthick" style="margin-bottom: 5px;" />
                                                                      
                                    <p:dataTable id="tblPostulantes" var="postulante" value="#{beanPostulante.listaPostulantes}" rows="3"
                                                 paginator="true"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="3,5,10,15" reflow="true" emptyMessage="Sin postulantes registrados">
                                        <p:column headerText="ID">
                                            <h:outputText value="#{postulante.idInscripcion}" />
                                        </p:column>
                                        <p:column headerText="Nombre">
                                            <h:outputText value="#{postulante.persona.nombres}" />
                                        </p:column>
                                        <p:column headerText="Apellido">
                                            <h:outputText value="#{postulante.persona.apellido}" />
                                        </p:column>
                                        <p:column headerText="DNI">
                                            <h:outputText value="#{postulante.persona.dni}" />
                                        </p:column>
                                        <p:column headerText="Nacimiento">
                                            <h:outputText value="#{postulante.persona.fechaDeNacimiento}" >
                                                <f:convertDateTime pattern="dd/MM/yy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Funcion del Cargo">
                                            <h:outputText value="#{postulante.cargo.funcion}" />
                                        </p:column>
                                        <p:column headerText="Postulante">
                                            <h:outputText value="#{postulante.puntaje}" />
                                        </p:column>
                                    </p:dataTable>
                                </h:form>
                            </p:tab>


                            <!--   
                            **********************************
                            PESTAÑA RESULTADO
                            **********************************
                            -->
                            <p:tab title="Resultado" id="tabResultado" disabled="#{!beanPostulante.datosValidos}" >
                                <h:form id="formResultadoConcurso">
                                    <h:panelGrid columns="2" cellpadding="3" frame="box" styleClass="panelAlta" columnClasses="label, value" >
                                        <f:facet name="header">
                                            <h:outputText value="Expediente:" />
                                        </f:facet>

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{beanConcurso.expedienteFinalCargado.idExpediente}" />

                                        <h:outputText value="Número:" />
                                        <h:outputText value="#{beanConcurso.expedienteFinalCargado.numeroExpediente}" />

                                        <h:outputText value="Unidad de Organización:" />
                                        <h:outputText value="(#{beanConcurso.expedienteFinalCargado.unidadDeOrganizacion.codigoUnidadDeOrganizacion}) #{beanConcurso.expedienteFinalCargado.unidadDeOrganizacion.nombreUnidad}" />

                                        <h:outputText value="Régimen que aplica:" />
                                        <h:outputText value="#{beanConcurso.expedienteFinalCargado.regimen}" />

                                        <h:outputText value="Situación:" />
                                        <h:outputText value="#{beanConcurso.expedienteFinalCargado.situacion}" />

                                        <f:facet name="header">
                                            <h:outputText value="Resoluciónes:" />
                                        </f:facet>

                                        <p:dataScroller value="#{beanConcurso.listaFinalResoluciones}" var="resolucion" chunkSize="5" mode="inline" scrollHeight="200" >

                                            <h:panelGrid columns="1" style="width:100%" >
                                                <p:outputPanel>
                                                    <h:panelGrid columns="6" cellpadding="5">

                                                        <h:outputText value="Id Resolucion:" />
                                                        <h:outputText value="#{resolucion.idResolucion}" style="font-weight: bold"/>

                                                        <h:outputText value="Numero de Resolucion:" />
                                                        <h:outputText value="#{resolucion.numeroResolucion}" style="font-weight: bold"/>

                                                        <h:outputText value="Agrupamiento:" />
                                                        <h:outputText value="#{resolucion.agrupamiento}" style="font-weight: bold"/>

                                                    </h:panelGrid>
                                                    <p:separator />
                                                </p:outputPanel>
                                            </h:panelGrid>
                                        </p:dataScroller>


                                    </h:panelGrid>
                                </h:form>
                            </p:tab>


                        </p:tabView>

                    </p:layoutUnit>
                </p:layout>


                <!--   
                **********************************
                DIALOGO PARA UNA NUEVA RESOLUCION  
                **********************************
                -->
                <p:dialog id="dlgNuevaResolucion" appendTo="@(body)" widgetVar="dlgNuevaResolucion" modal="true" showEffect="blind" hideEffect="blind" resizable="true" closable="true" closeOnEscape="true" >
                    <f:facet name="header">
                        <h:outputText id="lblEncabezadoNuevaResolucion" value="Resolucion Nueva - Exp. #{beanExpediente.expedienteNuevo.numeroExpediente}" />
                    </f:facet>
                    <h:form id="formNuevaResolucion">
                        <h:panelGrid columns="4" cellpadding="3" frame="box" styleClass="panelAlta" >

                            <h:outputText value="Numero de Resolución" />
                            <p:spinner id="spnNumeroResolucion" value="#{beanResolucion.resolucionNueva.numeroResolucion}" placeholder="Número de Resolución" min="0" max="99999" required="true" requiredMessage="Ingrese el numero que figura en la resolucion"  maxlength="6" />

                            <p:selectOneMenu id="cmbDependenciaNumeroResolucion" value="#{beanResolucion.dependenciaNumeroResolucion}" required="true" requiredMessage="Seleccione una dependencia" >
                                <f:selectItem itemLabel="S" itemValue="S" />
                                <f:selectItem itemLabel="SPPRS" itemValue="SPPRS" />
                            </p:selectOneMenu>

                            <p:spinner id="spnAnioNumeroResolucion" value="#{beanResolucion.anioNumeroResolucion}" placeholder="Año" min="1950" max="2020" required="true" requiredMessage="Ingrese el año que figura en la resolucion"  maxlength="4" />

                            <h:outputText value="Estado" />
                            <p:selectOneMenu id="cmbEstadoResolucion" value="#{beanResolucion.resolucionNueva.estado}" style="width:100%;" >
                                <f:selectItem itemLabel="En ejecucion" itemValue="EN EJECUCION"/>
                                <f:selectItem itemLabel="Finalizado" itemValue="FINALIZADO"/>
                            </p:selectOneMenu>

                            <h:outputText value="Agrupamiento: " />
                            <p:selectOneMenu id="cmbAgrupamientoCargo" value="#{beanResolucion.resolucionNueva.agrupamiento}" style="width:100%;" filter="true" >
                                <f:selectItem itemLabel="Administrativo" itemValue="ADMINISTRATIVO"/>
                                <f:selectItem itemLabel="Profesional" itemValue="PROFESIONAL"/>
                                <f:selectItem itemLabel="Técnico" itemValue="TECNICO"/>
                                <f:selectItem itemLabel="Mantenimiento y Producción" itemValue="MANTENIMIENTO Y PRODUCCION"/>
                                <f:selectItem itemLabel="Servicios Generales" itemValue="SERVICIOS GENERALES"/>
                                <f:selectItem itemLabel="Profesional Asistencial" itemValue="PROFESIONAL ASISTENCIAL"/>
                            </p:selectOneMenu>
                            <h:panelGrid columns="2">
                                <h:outputText value="Modificacion Parcial: " />
                                <p:inputSwitch offLabel="No" onLabel="Si" value="#{beanResolucion.banderaModificacionParcial}" onchange="#{beanResolucion.cambiarEstadoModificacion()}" >
                                    <p:ajax listener="#{beanResolucion.cambiarEstadoModificacion()}" update="txtResolucionModificacion" />
                                </p:inputSwitch>
                            </h:panelGrid>
                            <p:inputText id="txtResolucionModificacion"  placeholder="numero de resolucion" disabled="#{beanResolucion.banderaModificacionParcial}" value="#{beanResolucion.resolucionNueva.modificaResolucion}" maxlength="10"/>

                            <h:panelGrid columns="2" >
                                <h:outputText value="Prórroga: " />
                                <p:inputSwitch onchange="#{beanResolucion.cambiarEstadoProrroga()}" offLabel="No" onLabel="Si" value="#{beanResolucion.banderaProrroga}">
                                    <p:ajax listener="#{beanResolucion.cambiarEstadoProrroga()}" update="txtResolucionProrroga" />
                                </p:inputSwitch>
                            </h:panelGrid>
                            <p:inputText id="txtResolucionProrroga" placeholder="numero de resolucion" disabled="#{beanResolucion.banderaProrroga}" value="#{beanResolucion.resolucionNueva.prorrogaResolucion}" maxlength="10" />


                            <h:outputText value="Antecedente" />
                            <p:selectBooleanCheckbox value="#{beanResolucion.resolucionNueva.antecedente}" />


                            <h:outputText value="Oposición" />
                            <p:selectBooleanCheckbox value="#{beanResolucion.resolucionNueva.oposicion}" />

                            <h:outputText value="Clase" />
                            <p:selectOneMenu id="cmbClaseResolucion" style="width:100%;" value="#{beanResolucion.resolucionNueva.clase}" >
                                <f:selectItem itemLabel="Ordinario" itemValue="ORDINARIO"/>
                                <f:selectItem itemLabel="Extraordinario" itemValue="EXTRAORDINARIO"/>
                            </p:selectOneMenu>

                            <p:column /><p:column />

                            <h:outputText value="Apertura: " />
                            <p:calendar id="calFechaApertura" value="#{beanResolucion.resolucionNueva.fechaApertura}" pattern="dd-MM-yyyy" mask="true" >
                                <p:ajax event="dateSelect" listener="#{beanResolucion.onDateSelect}" update="calFechaCierre,calFechaEjecucion" />
                            </p:calendar>

                            <h:outputText value="Cierrre de inscripciones: " />
                            <p:calendar id="calFechaCierre" value="#{beanResolucion.resolucionNueva.fechaCierre}" mindate="#{beanResolucion.resolucionNueva.fechaApertura}" pattern="dd-MM-yyyy" mask="true" >
                                <p:ajax event="dateSelect" listener="#{beanResolucion.onDateSelect}" update="calFechaPublicacion,calFechaEjecucion" />
                            </p:calendar>

                            <h:outputText value="Ejecución: " />
                            <p:calendar id="calFechaEjecucion" value="#{beanResolucion.resolucionNueva.fechaEjecucion}" mindate="#{beanResolucion.resolucionNueva.fechaCierre}" pattern="dd-MM-yyyy" mask="true" />

                            <h:outputText value="Publicación de Resultados" />
                            <p:calendar id="calFechaPublicacion" value="#{beanResolucion.resolucionNueva.fechaPublicacion}" mindate="#{beanResolucion.resolucionNueva.fechaCierre}" pattern="dd-MM-yyyy" mask="true" />

                        </h:panelGrid>
                        <p:commandButton id="btnGuardarNuevaResolucion" icon="ui-icon-disk" value="Guardar" actionListener="#{beanResolucion.guardarResolucion()}" oncomplete="PF('dlgNuevaResolucion').hide();" update="tabuladorPestañero,tabuladorPestañero:formResoluciones:tblResoluciones,tabuladorPestañero:formExpedientes:msg,tabuladorPestañero:formCargos:tblCargos,:formCargoNuevo:cmbCargoNuevoResolucion" styleClass="btnVerde"  >
                            <f:setPropertyActionListener value="#{beanResolucion.resolucionNueva}" target="#{beanCargo.cargoNuevo.resolucion}" />
                        </p:commandButton>
                    </h:form>
                </p:dialog>

                <!--   
                **********************************
                DIALOGO PARA UN CARGO NUEVO
                **********************************
                -->
                <p:dialog header="Cargo Nuevo"  widgetVar="dlgCargoNuevo" id="dlgCargoNuevo" modal="true" showEffect="fade" hideEffect="fade" draggable="true" resizable="true" closeOnEscape="true" minWidth="373" >
                    <h:form id="formCargoNuevo">
                        <p:fieldset legend="ID: #{beanCargo.cargoNuevo.idCargo}"  >
                            <h:outputText value="Numero de Resolución:" />
                            <p:selectOneMenu id="cmbCargoNuevoResolucion" value="#{beanCargo.cargoNuevo.resolucion.numeroResolucion}" required="true" requiredMessage="Seleccione una Resolución" style="width: 100%;" filter="true" >
                                <f:selectItems var="resolucion" value="#{beanResolucion.listaResoluciones}" itemLabel="#{resolucion.numeroResolucion}" itemValue="#{resolucion.numeroResolucion}" />
                            </p:selectOneMenu>
                            <br/>
                            <h:outputText value="Establecimiento:" />
                            <p:selectOneMenu id="cmbEstablecimiento" value="#{beanCargo.cargoNuevo.establecimiento.codigoSiisa}" required="true" requiredMessage="Seleccione un Establecimiento" style="width: 100%;" filter="true" >
                                <f:selectItem noSelectionOption="true" itemLabel=" Seleccione un Establecimietno" itemValue="null" />
                                <f:selectItems var="establecimiento" value="#{beanConcurso.listaEstablecimientos}" itemLabel="#{establecimiento.nombre}" itemValue="#{establecimiento.codigoSiisa}" />
                            </p:selectOneMenu>
                            <h:panelGrid columns="2" cellpadding="4">

                                <p:inputText value="#{beanCargo.cargoNuevo.especialidad}" placeholder="Especialidad" maxlength="30" />
                                <p:inputText value="#{beanCargo.cargoNuevo.categoria}" placeholder="Categoria" maxlength="30" />
                                <p:spinner value="#{beanCargo.cargoNuevo.adicional}" placeholder="Cantidad de Horas" />
                                <p:spinner value="#{beanCargo.cargoNuevo.cantidad}" placeholder="Cantidad de Cargos" />

                            </h:panelGrid>

                            <h:panelGrid columns="1" cellpadding="3">
                                <p:outputLabel for="cmbProfesion" value="Profesión: " />
                                <p:selectOneMenu id="cmbProfesion" style="width:100%;" value="#{beanCargo.cargoNuevo.profesion.idProfesion}" filter="true">
                                    <f:selectItem itemLabel="No se especifica" itemValue="" noSelectionOption="true" />
                                    <f:selectItems var="profesion" value="#{beanCargo.listaProfesiones}" itemLabel="#{profesion.nombreProfesion}" itemValue="#{profesion.idProfesion}" />
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbFuncion" value="Función: " />
                                <p:selectOneMenu id="cmbFuncion" style="width:100%;" value="#{beanCargo.cargoNuevo.funcion}">
                                    <f:selectItem itemLabel="No se especifica" itemValue="NO SE ESPECIFICA"  />
                                    <f:selectItem itemLabel="Profesional en General" itemValue="PROFESIONAL EN GENERAL" />
                                    <f:selectItem itemLabel="Profesional en Guardia Activa" itemValue="PROFESIONAL EN GUARDIA ACTIVA" />
                                    <f:selectItem itemLabel="Jefe de Unidad" itemValue="JEFE DE UNIDAD" />
                                    <f:selectItem itemLabel="Jefe de Servicio" itemValue="JEFE DE SERVICIO" />
                                    <f:selectItem itemLabel="Jefe de Departamento" itemValue="JEFE DE DEPARTAMENTO" />
                                </p:selectOneMenu>
                                <p:outputLabel for="cmbAreaDesempenio" value="Área de Desempeño: " />
                                <p:selectOneMenu id="cmbAreaDesempenio" style="width:100%;" value="#{beanCargo.cargoNuevo.areaDeDesempenio}">
                                    <f:selectItem itemLabel="Seleccionar un área" itemValue="" noSelectionOption="true" itemDisabled="true" />
                                    <f:selectItem itemLabel="Unidad de Guardia" itemValue="UNIDAD DE GUARDIA" />
                                    <f:selectItem itemLabel="Unidad Sanitaria" itemValue="UNIDAD SANITARIA" />
                                    <f:selectItem itemLabel="Servicio Asistencial" itemValue="SERVICIO ASISTENCIAL" />
                                    <f:selectItem itemLabel="Servicio Sanitario" itemValue="SERVICIO SANITARIO" />
                                    <f:selectItem itemLabel="Departamento" itemValue="DEPARTAMENTO" />
                                </p:selectOneMenu>
                                <h:outputText value="Modalidad: " />
                                <p:selectOneMenu id="cmbModalidadCargo" value="#{beanCargo.cargoNuevo.modalidad}" style="width:100%;">
                                    <f:selectItem itemLabel="Único" itemValue="ÚNICO"/>
                                    <f:selectItem itemLabel="Eventual" itemValue="EVENTUAL" itemDisabled="true"/>
                                    <f:selectItem itemLabel="Temporario" itemValue="TEMPORARIO" itemDisabled="true" />
                                    <f:selectItem itemLabel="Contrato Especial" itemValue="CONTRATO ESPECIAL" itemDisabled="true" />
                                    <f:selectItem itemLabel="Plazo Determinado" itemValue="PLAZO DETERMINADO" itemDisabled="true" />
                                    <f:selectItem itemLabel="Ad Honorem" itemValue="AD HONOREM" itemDisabled="true" />
                                    <f:selectItem itemLabel="Residencias" itemValue="RESIDENCIAS" itemDisabled="true" />
                                </p:selectOneMenu>

                                <h:outputText value="Fecha del acta de la formulacion de Perfil " />
                                <p:calendar id="calFechaActaFormulacionPerfil" pattern="dd-MM-yyyy" mask="true" value="#{beanCargo.cargoNuevo.fechaActaFormulacionPerfil}" />

                                <h:outputText value="Enunciación: " />
                                <p:selectOneMenu id="cmbEnunciacion" style="width:100%;" value="#{beanCargo.cargoNuevo.enunciacion}">
                                    <f:selectItem itemLabel="Renuncia" itemValue="RENUNCIA"/>
                                    <f:selectItem itemLabel="Destitución" itemValue="DESTITUCION"/>
                                    <f:selectItem itemLabel="Cumplimiento de Periodo" itemValue="CUMPLIMIENTO DE PERIODO"/>
                                    <f:selectItem itemLabel="Fusión del Cargo" itemValue="FUSION DEL CARGO"/>
                                    <f:selectItem itemLabel="Muerte" itemValue="MUERTE"/>
                                    <f:selectItem itemLabel="Jubilación" itemValue="JUBILACION"/>
                                    <f:selectItem itemLabel="Retiro" itemValue="RETIRO"/>
                                </p:selectOneMenu>
                            </h:panelGrid>
                        </p:fieldset>
                        <p:commandButton id="btnGuardarNuevoCargo" oncomplete="PF('dlgCargoNuevo').hide();" value="Guardar" actionListener="#{beanCargo.guardarNuevoCargo}" icon="ui-icon-disk" update="tabuladorPestañero,tabuladorPestañero:formExpedientes:msg,tabuladorPestañero:formCargos:tblCargos,formPostulantes:cmbCargoPostulante" styleClass="btnVerde" />
                    </h:form>
                </p:dialog>
                <!--   
             **********************************
             DIALOGO PARA NUEVO JURADO
             **********************************
                -->

                <p:dialog id="dialogoNuevoJurado" header="Nuevo Jurado - Resolución : #{beanCargo.cargoNuevo.resolucion.numeroResolucion}"  widgetVar="dlgNuevoJurado" modal="true" showEffect="fade" hideEffect="fade" draggable="true" resizable="true" closeOnEscape="true" >


                    <p:fieldset legend="ID: #{beanTribunal.juradoNuevo.idTribunalJurado}" >
                        <h:form id="formBuscarJurado">
                            <h:panelGrid columns="3" cellpadding="4" cellspacing="2">
                                <h:outputText value="Buscar Jurado :" /> 
                                <p:inputText  id ="outNombre" value="#{beanTribunal.buscado}">
                                    <p:ajax event="keyup" update="btnBuscarProfesional" listener="#{beanTribunal.validarBuscador()}" />
                                </p:inputText>
                                <p:commandButton id="btnBuscarProfesional" actionListener="#{beanTribunal.buscarPersonaREFEPS()}" icon="ui-icon-search" disabled="#{!beanTribunal.banderaBtn}" oncomplete="PF('dlgProfesionalesResultado').show();" update="dlgSeleccionJuradoRefeps" />
                            </h:panelGrid>
                        </h:form>
                        <h:form id="formJuradoNuevo">
                            <p:separator/>

                            <h:panelGrid columns="2" cellpadding="4" cellspacing="2">
                                <h:outputText value="Nombres" /> 
                                <p:inputText  id ="nombre" />
                                <h:outputText value="Apellido" />
                                <p:inputText id="apellido"/> 
                            </h:panelGrid>
                            <h:panelGrid columns="4" cellpadding="4" cellspacing="2">
                                <h:outputText value="Estado :"/>
                                <p:selectOneMenu id="cmbEstadoJurado" value="#{beanTribunal.juradoNuevo.estado}" style="width:100px;" >
                                    <f:selectItem itemLabel="jurado" itemValue="JURADO"/>
                                    <f:selectItem itemLabel="veedor" itemValue="VEEDOR"/>
                                </p:selectOneMenu>

                                <h:outputText value="Presencia" />     
                                <p:inputSwitch value="#{beanTribunal.juradoNuevo.presencia}" onLabel="SI" offLabel="NO" />




                                <h:outputText value="Condición" />
                                <p:selectOneMenu id="cmbCondicionJurado" value="#{beanTribunal.juradoNuevo.presencia}" style="width:100px;" >
                                    <f:selectItem itemLabel="Titular" itemValue="TITULAR"/>
                                    <f:selectItem itemLabel="Suplente" itemValue="SUPLENTE"/>
                                </p:selectOneMenu> 

                            </h:panelGrid>

                            <p:selectOneMenu id="comboInstituciones" value="#{beanTribunal.juradoNuevo.institucion}" required="true" requiredMessage="Seleccione una Institución" filter="true" validatorMessage="Seleccione una institución valida" >
                                <f:selectItem noSelectionOption="true" itemLabel=" Seleccione una Institución" itemValue="null" />
                                <f:selectItems var="institucion" value="#{beanConcurso.listaInstituciones}" itemLabel="#{institucion.nombreInstitucion} (#{institucion.idInstitucion})" itemValue="#{institucion.idInstitucion}" />
                            </p:selectOneMenu>    
                            <p:selectOneMenu id="comboEstablecimiento" value="#{beanTribunal.juradoNuevo.establecimiento}" required="true" requiredMessage="Seleccione una Institución" filter="true" validatorMessage="Seleccione un establecimiento valido" style="width: 50%;">
                                <f:selectItem noSelectionOption="true" itemLabel=" Seleccione una Establecimiento" itemValue="null" />
                                <f:selectItems var="establecimiento" value="#{beanConcurso.listaEstablecimientos}" itemLabel="#{establecimiento.nombre} (#{establecimiento.idEstablecimiento})" itemValue="#{establecimiento.idEstablecimiento}" />
                            </p:selectOneMenu>   


                            <p:commandButton id="btnGuardarJurado" value="Guardar" actionListener="#{beanTribunal.guardarJurado()}" icon="ui-icon-disk" update="tabuladorPestañero:formTribunal" styleClass="btnVerde" />
                        </h:form>
                    </p:fieldset>     
                </p:dialog>

                <!--   
             **********************************
             DIALOGO PARA SELECCIONAR JURADO
             **********************************
                -->
                <p:dialog id="dlgSeleccionJuradoRefeps" header="Seleccione el Jurado"  widgetVar="dlgProfesionalesResultado" modal="true" showEffect="fade" hideEffect="fade" draggable="true" resizable="true" closeOnEscape="true" style="width: 50%;" >
                    <h:form id="formJuradosRefeps">
                        <p:dataTable id="tblResultadoBusqueda" var="persona" value="#{beanTribunal.listaPersonas}" >
                            <f:facet name="header">
                                Profesionales Coincidentes
                            </f:facet>

                            <p:column headerText="Documento" sortBy="#{persona.dni}">
                                <h:outputText value="#{persona.dni}" />
                            </p:column>
                            <p:column headerText="Nombre" sortBy="#{persona.nombres}">
                                <h:outputText value="#{persona.nombres}" />
                            </p:column>
                            <p:column headerText="Apellido" sortBy="#{persona.apellido}">
                                <h:outputText value="#{persona.apellido}" />
                            </p:column>


                        </p:dataTable>
                    </h:form>
                </p:dialog>


                <!--   
             **********************************
             DIALOGO PARA SELECCIONAR UNA PERSONA
             **********************************
                -->

                <p:dialog id="dlgPersonaResultado" header="Seleccione una persona"  widgetVar="dlgPersonaResultado" modal="true" showEffect="fade" hideEffect="fade" draggable="true" resizable="true" closeOnEscape="true" style="width: 50%;" >
                    <h:form id="formPersonaResultado">
                        <p:dataTable id="tblResultado" var="persona" value="#{beanPostulante.listaResultado}" selectionMode="single" selection="#{beanPostulante.postulanteSeleccionado}" rowKey="#{persona.idPersona}">
                            <f:facet name="header">
                                Personas Coincidentes
                            </f:facet>
                            <p:ajax event="rowSelect" listener="#{beanPostulante.seleccionarPersona}" update=":formPostulantes" />
                            <p:ajax event="rowUnselect" listener="#{beanPostulante.deseleccionarPersona}" update=":formPostulantes" />
                            <p:column headerText="Documento" sortBy="#{persona.dni}">
                                <h:outputText value="#{persona.dni}" />
                            </p:column>
                            <p:column headerText="Nombre" sortBy="#{persona.nombres}">
                                <h:outputText value="#{persona.nombres}" />
                            </p:column>
                            <p:column headerText="Apellido" sortBy="#{persona.apellido}">
                                <h:outputText value="#{persona.apellido}" />
                            </p:column>
                            <p:column headerText="Sexo" sortBy="#{persona.sexo}">
                                <h:outputText value="#{persona.sexo}" />
                            </p:column>
                            <p:column headerText="Nacionalidad" sortBy="#{persona.nacionalidad}">
                                <h:outputText value="#{persona.nacionalidad}" />
                            </p:column>

                        </p:dataTable>
                    </h:form>
                </p:dialog>


                <!--   
             **********************************
             DIALOGO PARA CARGAR UN POSTULANTE NUEVO
             **********************************
                -->

                <p:dialog id="dlgPostulanteNuevo" header="Nuevo Postulante"  widgetVar="dlgPostulanteNuevo" modal="true" showEffect="fade" hideEffect="fade" draggable="true" resizable="true" closeOnEscape="true" >
                    <p:panel id="pnlBuscarPostulanteNuevo" header="Datos del Postulante" toggleable="true" closable="false" toggleSpeed="700" widgetVar="pnlPostulanteNuevo" style="margin-bottom:20px">
                        <h:form id="formBuscarPostulante">
                            <h:panelGrid columns="4" cellpadding="5">
                                <p:inputText id="txtBuscarPostulante" value="#{beanPostulante.buscado}" maxlength="25" placeholder="Buscar..."  >
                                    <p:ajax event="keyup" update="btnBuscarPostulante" listener="#{beanPostulante.validarBuscador}" />
                                </p:inputText>
                                <h:outputText value="en" />
                                <p:selectOneMenu id="cmbCriterioBusqueda" value="#{beanPostulante.criterio}">
                                    <f:selectItem itemLabel="Nombre" itemValue="nombre" />
                                    <f:selectItem itemLabel="Apellido" itemValue="apellido" />
                                    <f:selectItem itemLabel="Dni" itemValue="dni" />
                                </p:selectOneMenu>
                                <p:commandButton id="btnBuscarPostulante" value="Buscar" actionListener="#{beanPostulante.buscarPorCriterio()}" icon="ui-icon-search" disabled="#{!beanPostulante.banderaBtn}" update="tabuladorPestañero:formExpedientes:msg,:formPostulantes:pnlDatosNuevoPostulante" />
                            </h:panelGrid>
                        </h:form>
                        <p:separator />
                        <h:form id="formPostulantes">
                            <h:panelGrid id="pnlDatosNuevoPostulante" columns="4" cellpadding="5">
                                <h:outputText value="Nombre" />
                                <p:inputText id="txtNombreNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.nombres}" required="true" requiredMessage="Ingrese el nombre del postulante" maxlength="25" />

                                <h:outputText value="Apellido" />
                                <p:inputText id="txtApellidoNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.apellido}" required="true" requiredMessage="Ingrese el apellido del postulante" maxlength="25" />

                                <h:outputText value="Dni" />
                                <p:inputText id="txtDniNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.dni}" required="true" requiredMessage="Ingrese el DNI del postulante" maxlength="9" converterMessage="Ingrese unicamente números para el DNI" >
                                    <f:convertNumber integerOnly="true" />
                                </p:inputText>

                                <h:outputText value="Cuil" />
                                <p:inputText id="txtCuilNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.cuil}" maxlength="12" />

                                <h:outputText value="Fecha de Nacimiento" />
                                <p:calendar id="calFechaNacNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.fechaDeNacimiento}" pattern="dd-MM-yyyy" mask="true" required="true" requiredMessage="Ingrese la fecha de nacimiento del postulante" />

                                <h:outputText value="Direccion" />
                                <p:inputText id="txtDireccionNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.direccion}" />

                                <h:outputText value="Sexo" />
                                <p:selectOneRadio id="console" value="#{beanPostulante.nuevoPostulante.persona.sexo}">
                                    <f:selectItem itemLabel="Masculino" itemValue="M" />
                                    <f:selectItem itemLabel="Femenino" itemValue="F" />
                                </p:selectOneRadio>

                                <h:outputText value="Teléfono" />
                                <p:inputText id="txtTelefonoNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.telefono}" converterMessage="Ingrese unicamente numeros para el teléfono" maxlength="15" >
                                    <f:convertNumber integerOnly="true" />
                                </p:inputText>

                                <h:outputText value="Email" />
                                <p:inputText id="txtEmailNuevoPostulante" value="#{beanPostulante.nuevoPostulante.persona.email}" maxlength="25" />


                            </h:panelGrid>

                            <p:separator />



                            <h:panelGrid columns="3">
                                <h:outputText value="Ganador del Cargo" />
                                <p:inputSwitch offLabel="No" onLabel="Si" value="#{beanPostulante.banderaGanador}" onchange="#{beanPostulante.cambiarEstadoGanador()}" >
                                    <p:ajax listener="#{beanPostulante.cambiarEstadoGanador()}" update="cmbCargoPostulante" />
                                </p:inputSwitch>
                                <p:selectOneMenu id="cmbCargoPostulante" value="#{beanPostulante.nuevoPostulante.cargo.idCargo}" required="true" requiredMessage="Seleccione un cargo" filter="true" validatorMessage="Seleccione un cargo válido" disabled="#{beanPostulante.banderaGanador}" converterMessage="Seleccione un cargo valido" >
                                    <f:selectItem noSelectionOption="true" itemLabel=" Seleccione un Cargo" itemValue="null" />
                                    <f:selectItems var="cargo" value="#{beanCargo.listaCargos}" itemLabel="#{cargo.funcion} (#{cargo.categoria})" itemValue="#{cargo.idCargo}" />
                                </p:selectOneMenu>
                            </h:panelGrid>

                            <h:panelGrid columns="4">
                                <p:inputText id="txtAntecedentePostulante" value="#{beanPostulante.nuevoPostulante.antecedentes}" placeholder="Antecedente">
                                    <f:convertNumber maxFractionDigits="2" pattern="###.##" />
                                </p:inputText>

                                <p:inputText id="txtOposicionPostulante" value="#{beanPostulante.nuevoPostulante.oposicion}" placeholder="Oposicion">
                                    <f:convertNumber maxFractionDigits="2" pattern="###.##" />
                                </p:inputText>

                                <p:inputText id="txtPuntajePostulante" value="#{beanPostulante.nuevoPostulante.puntaje}" placeholder="Puntaje">
                                    <f:convertNumber maxFractionDigits="2" pattern="###.##" />
                                </p:inputText>

                                <p:spinner value="#{beanPostulante.nuevoPostulante.fojas}" min="0" max="100" placeholder="Fojas" />
                            </h:panelGrid>

                            <p:commandButton id="btnGuardarNuevoPostulante" value="Guardar" actionListener="#{beanPostulante.guardarNuevoPostulante}" icon="ui-icon-disk" update="tabuladorPestañero,tabuladorPestañero:formExpedientes:msg,tabuladorPestañero:formPestañaPostulantes:tblPostulantes" styleClass="btnVerde" validateClient="true" />
                        </h:form>

                    </p:panel>
                </p:dialog>


            </ui:define>
        </ui:composition>
    </h:body>
</html>

